<layout name="layout"/>
<div class="main-div">
    <form name="main_form" method="POST" action="__SELF__" enctype="multipart/form-data">
        <table cellspacing="1" cellpadding="3" width="100%">
            <?php if($config['digui'] == 1): ?>
                <tr>
                    <td class="label">上级权限：</td>
                    <td>
                        <select name="parent_id">
                            <option value="0">顶级权限</option>
                            <?php echo "<?php foreach (\$parentData as \$k => \$v): ?>"; ?>
                                <option value="<?php echo "<?php echo \$v['{$config['pk']}']; ?>"; ?>">
                                    <?php echo "<?php echo str_repeat('-', 8*\$v['level']).\$v['{$config['diguiName']}']; ?>"; ?>
                                </option>
                            <?php echo "<?php endforeach; ?>"; ?>
                        </select>
                    </td>
                </tr>
            <?php endif; ?>
            <?php foreach ($config['fields'] as $k => $v):if($v['type']=='null' || ($config['digui'] == 1 && 'parent_id' == $k)) continue; ?>
            <?php if ($v['type'] === 'html'): ?>
                <?php $textarea[$v['text']] = "<tr>\n<td class='label'>{$v['text']}</td>\n<td>\n<textarea id='{$k}' name='{$k}'>{$v['default']}</textarea>\n</td>\n</tr>"; ?>
            <?php else: ?>
            <tr>
                <td class="label"><?php echo $v['text']; ?>：</td>
                <td>
                    <?php if($v['type'] == 'text'): ?>
                    <input <?php if((strpos($k, 'time') !== FALSE) || (strpos($k, 'date') !== FALSE)) echo 'id="'.$k.'"'; ?> type="text" name="<?php echo $k; ?>" value="<?php echo $v['default']; ?>" />
                    <?php elseif($v['type'] == 'password'): ?>
                    <input type="password" size="25" name="<?php echo $k; ?>"/>
                    <?php elseif ($v['type'] == 'file'): ?>
                    <input type="file" name="<?php echo $k; ?>"/>
                    <?php elseif ($v['type'] == 'radio'): $_i = 0; foreach ($v['values'] as $k1 => $v1): ?>
                    <input type="radio" name="<?php echo $k; ?>" value="<?php echo $k1; ?>" <?php if($v['default'] == $k1) echo 'checked="checked"'; ?>/>
                    <?php echo $v1; ?>
                    <?php $_i++;endforeach;endif; ?>
                </td>
            </tr>
            <?php endif; ?>
            <?php endforeach; ?>
            <?php if(isset($textarea)): foreach ($textarea as $_v): ?>
            <?php echo $_v; ?>
            <?php endforeach;endif; ?>
            <tr>
                <td colspan="99" align="center">
                    <input type="submit" class="button" value=" 确定 "/>
                    <input type="reset" class="button" value=" 重置 "/>
                </td>
            </tr>
        </table>
    </form>
</div>
<?php foreach ($config['fields'] as $k => $v):if($v['type'] == 'html'): ?>
    <!--导入在线编辑器-->
    <link href="__PUBLIC__/Umeditor/themes/default/css/umeditor.css" type="text/css" rel="stylesheet">
    <script type="text/javascript" charset="utf-8" src="__PUBLIC__/Umeditor/umeditor.config.js"></script>
    <script type="text/javascript" charset="utf-8" src="__PUBLIC__/Umeditor/umeditor.min.js"></script>
    <script type="text/javascript" src="__PUBLIC__/Umeditor/lang/zh-cn/zh-cn.js"></script>
<?php break;endif;endforeach; ?>
<script type="application/javascript">
    <?php foreach ($config['fields'] as $k => $v):if((strpos($k, 'time') !== FALSE) || (strpos($k, 'date') !== FALSE)): ?>
        $("#<?php echo $k; ?>").datepicker();

    <?php endif;endforeach; ?>
    <?php foreach ($config['fields'] as $k => $v):if($v['type'] == 'html'): ?>
        UM.getEditor('<?php echo $k; ?>', {
            initialFrameWidth:"100%",
            initialFrameHeight: 350
        });
    <?php endif;endforeach; ?>
</script>